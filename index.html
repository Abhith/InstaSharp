<!DOCTYPE html>
<html>

  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <meta name="description" content="Instasharp : A c# wrapper for the Instagram API">

    <link rel="stylesheet" type="text/css" media="screen" href="stylesheets/stylesheet.css">

    <title>Instasharp</title>
  </head>

  <body>

    <!-- HEADER -->
    <div id="header_wrap" class="outer">
        <header class="inner">
          <a id="forkme_banner" href="https://github.com/InstaSharp/InstaSharp">View on GitHub</a>

          <h1 id="project_title">Instasharp</h1>
          <h2 id="project_tagline">A c# wrapper for the Instagram API</h2>

            <section id="downloads">
              <a class="zip_download_link" href="https://github.com/InstaSharp/InstaSharp/zipball/master">Download this project as a .zip file</a>
              <a class="tar_download_link" href="https://github.com/InstaSharp/InstaSharp/tarball/master">Download this project as a tar.gz file</a>
            </section>
        </header>
    </div>

    <!-- MAIN CONTENT -->
    <div id="main_content_wrap" class="outer">
      <section id="main_content" class="inner">
        <h1>
<a id="instasharp" class="anchor" href="#instasharp" aria-hidden="true"><span class="octicon octicon-link"></span></a>InstaSharp</h1>

<p><a href="https://gitter.im/InstaSharp/InstaSharp?utm_source=badge&amp;utm_medium=badge&amp;utm_campaign=pr-badge&amp;utm_content=badge"><img src="https://badges.gitter.im/Join%20Chat.svg" alt="Join the chat at https://gitter.im/InstaSharp/InstaSharp"></a></p>

<p>InstaSharp is a wrapper around the Instagram API.  It's goal is to provide you with a clean and neat interface for ineracting with Instagram's data services, while taking care of all the lower level things like HTTP requests, OAuth flow, and mapping the JSON request to .NET classes.</p>

<p><a href="https://ci.appveyor.com/project/Fujiy/instasharp"><img src="https://ci.appveyor.com/api/projects/status/ch334xwq15i9pcum" alt="Build status"></a></p>

<h3>
<a id="where-do-i-get-support" class="anchor" href="#where-do-i-get-support" aria-hidden="true"><span class="octicon octicon-link"></span></a>Where do I get support?</h3>

<p>Bugs, Feature Requests and Discussion at <a href="https://github.com/InstaSharp/InstaSharp/issues">github.com/InstaSharp/InstaSharp/issues</a> or on <a href="http://stackoverflow.com/questions/tagged/instasharp">Stack Overflow</a>. Feel free to submit Pull Requests on GitHub.</p>

<h3>
<a id="where-is-the-current-documentation" class="anchor" href="#where-is-the-current-documentation" aria-hidden="true"><span class="octicon octicon-link"></span></a>Where is the current documentation?</h3>

<p>See <a href="http://instasharp.github.io/InstaSharp/Documentation/index.html">Documentation</a></p>

<h2>
<a id="getting-started" class="anchor" href="#getting-started" aria-hidden="true"><span class="octicon octicon-link"></span></a>Getting Started</h2>

<h3>
<a id="register-your-application" class="anchor" href="#register-your-application" aria-hidden="true"><span class="octicon octicon-link"></span></a>Register Your Application</h3>

<p>To get started, you will need to register an application with Instagram.  They will provide you with a client id, and a client secret.  They will additionally ask you for a callback URL. This is simply a URL that your browser will redirect back to during the Instagram Auth flow.</p>

<h3>
<a id="the-instagramconfig-class" class="anchor" href="#the-instagramconfig-class" aria-hidden="true"><span class="octicon octicon-link"></span></a>The InstagramConfig Class</h3>

<p>Now that you have registered an application, you need to create an instance of the InstagramConfig class.  This class has many of the options specified for you already, with optional overrides.</p>

<pre><code>var clientId = ConfigurationManager.AppSettings["client_id"];
var clientSecret = ConfigurationManager.AppSettings["client_secret"];
var redirectUri = ConfigurationManager.AppSettings["redirect_uri"];
var realtimeUri = "";

InstagramConfig config = new InstagramConfig(clientId, clientSecret, redirectUri, realtimeUri);
</code></pre>

<h3>
<a id="authenticate" class="anchor" href="#authenticate" aria-hidden="true"><span class="octicon octicon-link"></span></a>Authenticate</h3>

<p>Use the OAuth class to authenticate. It provides a helper to give you the initial link for handing users off to Instagram for authentication.  It will want to know what level of access you are requesting via the "scope".</p>

<pre><code>@{
    // create the auth url
    var scopes = new List&lt;OAuth.Scope&gt;();
    scopes.Add(OAuth.Scope.Likes);
    scopes.Add(OAuth.Scope.Comments);


    var link = OAuth.AuthLink(config.OAuthUri + "authorize", config.ClientId, config.RedirectUri, scopes, OAuth.ResponseType.Code);
}
</code></pre>

<p>Now Instagram will athenticate the user on their end and callback to your callback url.  When you receive that callback, you need to respond with your client secret.  Instagram will then respond to that request with the authorization token.</p>

<pre><code>[GET("oauth")]
public async Task&lt;ActionResult&gt; Index(string code)
{
    // add this code to the auth object
    var auth = new InstaSharp.OAuth(config);

    // now we have to call back to instagram and include the code they gave us
    // along with our client secret
    var oauthResponse = await auth.RequestToken(code);

    // tell the session that we are authenticated
    config.isAuthenticated = true;

    // both the client secret and the token are considered sensitive data, so we won't be
    // sending them back to the browser. we'll only store them temporarily.  If a user's session times
    // out, they will have to click on the authenticate button again - sorry bout yer luck.
    Session.Add("InstaSharp.AuthInfo", oauthResponse);

    // all done, lets redirect to the home controller which will send some intial data to the app
    return RedirectToAction("Index", "Home");
}
</code></pre>

<p>Now you are authenticated and ready to call the Instagram Endpoints.  Instasharp carves these up under the "endpoints" namespace.  Each one is a class and will be expecting a configuration object and an OAuthResponse object.  For instance, you can request a user's feed as such...</p>

<pre><code>readonly InstaSharp.Endpoints.Users _users;

public UsersController()
{
    users = new Endpoints.Users(config, oauthResponse);
}

[GET("api/users/feed")]
public async Task&lt;ActionResult&gt; Feed(string next_max_id)
{
    var feed = next_max_id == null ? await users.Feed() : await users.Feed(next_max_id);

    // return plain JSON
    return Json(result.Data);
}
</code></pre>

<p>Each response returned by InstaSharp will contains two objects: a Meta object, and a "Data" property that has the reponse fully mapped to .NET types.</p>

<p>The InstaSharp library embeds the documentation of Instagram into the code.  Each endpoint method will tell you if it requires authentication, and what parameters it needs.</p>
      </section>
    </div>

    <!-- FOOTER  -->
    <div id="footer_wrap" class="outer">
      <footer class="inner">
        <p class="copyright">Instasharp maintained by <a href="https://github.com/InstaSharp">InstaSharp</a></p>
        <p>Published with <a href="https://pages.github.com">GitHub Pages</a></p>
      </footer>
    </div>

              <script type="text/javascript">
            var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");
            document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
          </script>
          <script type="text/javascript">
            try {
              var pageTracker = _gat._getTracker("UA-51167170-1");
            pageTracker._trackPageview();
            } catch(err) {}
          </script>


  </body>
</html>
